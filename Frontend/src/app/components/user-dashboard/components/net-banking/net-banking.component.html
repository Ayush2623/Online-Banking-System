<!-- Net Banking Management -->
<div class="max-w-4xl mx-auto">
  <!-- Header -->
  <div class="mb-8">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-3xl font-bold text-gray-900">Net Banking Services</h1>
        <p class="text-gray-600 mt-1">Manage your online banking access and security</p>
      </div>
      <button
        (click)="goBack()"
        class="btn-secondary px-4 py-2 text-sm font-medium">
        <svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
        </svg>
        Back to Dashboard
      </button>
    </div>
  </div>

  <!-- Success Message -->
  <div *ngIf="successMessage" class="alert alert-success mb-6">
    <div class="flex items-center">
      <svg class="h-5 w-5 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
      </svg>
      {{ successMessage }}
    </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="alert alert-error mb-6">
    <div class="flex items-center">
      <svg class="h-5 w-5 text-red-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
      </svg>
      {{ error }}
    </div>
  </div>

  <!-- Net Banking Status -->
  <div class="card mb-8">
    <div class="card-header">
      <div class="flex items-center justify-between">
        <div>
          <h2 class="text-lg font-semibold text-gray-900">Net Banking Status</h2>
          <p class="text-sm text-gray-600 mt-1">Your online banking service status</p>
        </div>
        <div class="flex items-center">
          <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium"
                [class]="isRegistered ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'">
            <svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path *ngIf="isRegistered" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              <path *ngIf="!isRegistered" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
            {{ isRegistered ? 'Active' : 'Inactive' }}
          </span>
        </div>
      </div>
    </div>

    <div class="p-6">
      <!-- Account Information -->
      <div *ngIf="userAccount" class="mb-6">
        <div class="grid grid-cols-2 gap-4 text-sm">
          <div>
            <span class="font-medium text-gray-600">Account Number:</span>
            <span class="ml-2 font-mono text-gray-900">{{ userAccount.accountNumber }}</span>
          </div>
          <div>
            <span class="font-medium text-gray-600">Account Type:</span>
            <span class="ml-2 text-gray-900">{{ userAccount.accountType }}</span>
          </div>
          <div>
            <span class="font-medium text-gray-600">Account Holder:</span>
            <span class="ml-2 text-gray-900">{{ userAccount.accountHolderName }}</span>
          </div>
          <div>
            <span class="font-medium text-gray-600">IFSC Code:</span>
            <span class="ml-2 font-mono text-gray-900">{{ userAccount.ifscCode }}</span>
          </div>
        </div>
      </div>

      <!-- Registration Details -->
      <div *ngIf="isRegistered && netBankingDetails" class="mb-6 bg-green-50 border border-green-200 rounded-lg p-4">
        <h3 class="text-sm font-medium text-green-900 mb-3">Net Banking Details</h3>
        <div class="grid grid-cols-2 gap-4 text-sm">
          <div>
            <span class="font-medium text-green-700">Username:</span>
            <span class="ml-2 text-green-900">{{ netBankingDetails.Username }}</span>
          </div>
          <div>
            <span class="font-medium text-green-700">Registration Date:</span>
            <span class="ml-2 text-green-900">{{ formatDate(netBankingDetails.CreatedAt) }}</span>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex flex-wrap gap-3">
        <button
          *ngIf="!isRegistered"
          (click)="toggleRegistrationForm()"
          class="btn-primary px-6 py-2 text-sm font-medium">
          <svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
          </svg>
          Register for Net Banking
        </button>

      </div>
    </div>
  </div>

  <!-- Registration Form -->
  <div *ngIf="showRegistrationForm" class="card mb-8">
    <div class="card-header">
      <h2 class="text-lg font-semibold text-gray-900">Register for Net Banking</h2>
      <p class="text-sm text-gray-600 mt-1">Create your online banking credentials</p>
    </div>

    <form [formGroup]="registrationForm" (ngSubmit)="onRegistrationSubmit()" class="p-6 space-y-6">
      
      <!-- Account Number (Read-only) -->
      <div>
        <label for="accountNumber" class="form-label">Account Number</label>
        <input 
          type="text" 
          id="accountNumber"
          formControlName="accountNumber"
          class="form-input bg-gray-50 cursor-not-allowed"
          readonly>
      </div>

      <!-- Username -->
      <div>
        <label for="username" class="form-label">Username <span class="text-red-500">*</span></label>
        <input 
          type="text"
          id="username"
          formControlName="username"
          class="form-input"
          [class.border-red-500]="getFieldError(registrationForm, 'username')"
          placeholder="Enter NetBanking username">
        <p *ngIf="getFieldError(registrationForm, 'username')" class="text-red-500 text-sm mt-1">{{ getFieldError(registrationForm, 'username') }}</p>
        <p class="text-xs text-gray-500 mt-1">Minimum 3 characters required</p>
      </div>

      <!-- Password -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="password" class="form-label">Password <span class="text-red-500">*</span></label>
          <div class="relative">
            <input 
              [type]="showPassword ? 'text' : 'password'"
              id="password"
              formControlName="password"
              class="form-input pr-10"
              [class.border-red-500]="getFieldError(registrationForm, 'password')"
              placeholder="Enter password">
            <button
              type="button"
              (click)="togglePasswordVisibility('password')"
              class="absolute inset-y-0 right-0 pr-3 flex items-center">
              <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path *ngIf="!showPassword" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                <path *ngIf="!showPassword" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                <path *ngIf="showPassword" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L8.464 8.464m1.414 1.414L8.464 8.464m5.656 5.656l1.415 1.415m-1.415-1.415l1.415 1.415M21 12c-1.274 4.057-5.064 7-9.542 7-.847 0-1.669-.105-2.454-.303"></path>
              </svg>
            </button>
          </div>
          <p *ngIf="getFieldError(registrationForm, 'password')" class="text-red-500 text-sm mt-1">{{ getFieldError(registrationForm, 'password') }}</p>
          <p class="text-xs text-gray-500 mt-1">Minimum 6 characters required</p>
        </div>

        <div>
          <label for="confirmPassword" class="form-label">Confirm Password <span class="text-red-500">*</span></label>
          <div class="relative">
            <input 
              [type]="showConfirmPassword ? 'text' : 'password'"
              id="confirmPassword"
              formControlName="confirmPassword"
              class="form-input pr-10"
              [class.border-red-500]="getFieldError(registrationForm, 'confirmPassword')"
              placeholder="Re-enter password">
            <button
              type="button"
              (click)="togglePasswordVisibility('confirmPassword')"
              class="absolute inset-y-0 right-0 pr-3 flex items-center">
              <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path *ngIf="!showConfirmPassword" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                <path *ngIf="!showConfirmPassword" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                <path *ngIf="showConfirmPassword" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L8.464 8.464m1.414 1.414L8.464 8.464m5.656 5.656l1.415 1.415m-1.415-1.415l1.415 1.415M21 12c-1.274 4.057-5.064 7-9.542 7-.847 0-1.669-.105-2.454-.303"></path>
              </svg>
            </button>
          </div>
          <p *ngIf="getFieldError(registrationForm, 'confirmPassword')" class="text-red-500 text-sm mt-1">{{ getFieldError(registrationForm, 'confirmPassword') }}</p>
        </div>
      </div>

      <!-- Important Information -->
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
        <div class="flex items-start">
          <svg class="h-5 w-5 text-blue-600 mt-0.5 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          <div class="text-sm text-blue-800">
            <p class="font-medium mb-2">Important Security Information</p>
            <ul class="list-disc list-inside space-y-1">
              <li>Choose a unique username for your NetBanking account</li>
              <li>Use a strong password with mix of letters, numbers and symbols</li>
              <li>Keep your credentials secure and do not share them</li>
              <li>This will be your login for online banking services</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="flex items-center justify-between pt-6 border-t border-gray-200">
        <button
          type="button"
          (click)="toggleRegistrationForm()"
          class="btn-secondary px-6 py-2 text-sm font-medium">
          Cancel
        </button>
        
        <button 
          type="submit" 
          [disabled]="isLoading || registrationForm.invalid"
          class="btn-primary px-8 py-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center">
          <div *ngIf="isLoading" class="spinner mr-3"></div>
          <svg *ngIf="!isLoading" class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
          </svg>
          <span *ngIf="!isLoading">Register Net Banking</span>
          <span *ngIf="isLoading">Registering...</span>
        </button>
      </div>
    </form>
  </div>


  <!-- Help Section -->
  <div class="text-center">
    <p class="text-sm text-gray-600">
      Need help with Net Banking? 
      <a href="#" class="text-blue-600 hover:text-blue-800 font-medium">Contact Support</a>
      or 
      <a href="#" class="text-blue-600 hover:text-blue-800 font-medium">View Security Guidelines</a>
    </p>
  </div>
</div>